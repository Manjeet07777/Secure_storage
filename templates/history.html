<!DOCTYPE html>
<html>
<head>
    <title>My File History</title>
</head>
<body>
    <h2>My File History</h2>

    {% if files %}
        <table border="1" cellpadding="5" cellspacing="0">
            <tr>
                <th>Filename</th>
                <th>Actions</th>
            </tr>
            {% for file in files %}
            <tr>
                <td>{{ file.original_filename }}</td>
                <td>
                    <!-- Owner buttons -->
                    {% if file.user == request.user %}
                        <a href="{% url 'download' file.id %}">Decrypt / Download</a> |
                        <a href="{% url 'delete' file.id %}">Delete</a>
                    {% else %}
                        <!-- Non-owner: direct encrypted download -->
                        <a href="{% url 'download' file.id %}">Download Encrypted</a>
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        </table>
    {% else %}
        <p>No files uploaded yet.</p>
    {% endif %}

    <p><a href="{% url 'upload' %}">⬅️ Upload New File</a></p>
    <p><a href="{% url 'logout' %}">Logout</a></p>
</body>
</html>
